---
title: C++基础概念II
date: 2018-08-21 09:58:44
categories: 2018年8月
tags: [C++]

---
# C++基础概念II

总结C++基础概念
 
## 1.C++的四种强制类型转换关键字，及它们的特点和使用的场合


<!-- more -->

C语言中的强制类型转换可以随意的转换我们想要的类型了,格式如下

	(类型) 变量名;

为什么c++还要引入新的4种类型转换呢?

  这是因为新的类型转换控制符可以很好的控制类型转换的过程,允许控制各种类型不同的转换.

  还有一点好处是C++的类型转换控制符能告诉程序员或读者我们这个转换的目的是什么,我们
 只要看一下代码的类型转换控制符,就能明白我们想要达到什么样的目的.

### 1)static_cast <T*> (content)  静态转换.在编译期间处理

   它主要用于C++中内置的基本数据类型之间的转换.但是没有运行时类型的检测来保证转换的安全性.

   为什么需要static_cast类型的转换?

#### a.用于基类和子类之间的指针或引用的转换。
这种转换把子类的指针或引用转换为基类表示是安全的;进行下行转换,把基类的指针或引用转换为子类表示时,由于没有进行动态类型检测,所以是不安全的;

#### b.把void类型的指针转换成目标类型的指针(不安全).

#### c.用于内置的基本的数据类型之间的转换.

#### d.把任何类型的表达式转换成void类型的.

   注意:static_cast不会转换掉content的const,volatile,__unaligned属性

### 2)static_const<T*>(content):去常转换;编译时执行;

  它主要作用同一个类型之间的去常和添加常属性之间的转换.不能用做不同的类型之间的转换.

  它可以把一个不是常属性的转换成常属性的,同时它也可以对一个本是常属性的类型进行去常.

### 3)dynamic_cast<T*>(content) 动态类型转换;也是向下安全转型;是在运行的时候执行;

   通常用于基类和派生类之间的转换.转换时会进行类型安全检查。

#### a.
不能用于内置的基本数据类型之间的转换.

#### b.
dynamic_cast转换成功的话返回的是类的指针或引用,失败返回null;

#### c.
dynamic_cast进行的转换的时候基类中一定要有虚函数,因为只有类中有了虚函数, 才说明它希望让基类指针或引用指向其派生类对象的情况,这样才有意义.这是由于运行时类型检查需要运行时类型的信息,而这些信息存储在虚函数表中.

#### d.
在类的转换时,在类层次间进行转换的时候,dynamic_cast和static_cast进行上行转换的时候效果是一样的；但是在进行下行转换的时候,dynamic_cast会进行类型检查所以它更安全.它可以让指向基类的指针转换为指向其子类的指针或是其兄弟类的指针;

### 4)reinterpret_cast<T*>(content)重解释类型转换;

   它有着和C风格强制类型转换同样的功能;它可以转化任何的内置数据类型为其他的类型, 同时它也可以把任何类型的指针转化为其他的类型;它的机理是对二进制数据进行重新的的解释,不会改变原来的格式,而static_cast会改变原来的格式;

## 2.请说出static和const关键字尽可能多的作用

### static关键字至少有下列n个作用：
#### （1）
函数体内static变量的作用范围为该函数体，不同于auto变量，该变量的内存只被分配一次，因此其值在下次调用时仍维持上次的值；
#### （2）
在模块内的static全局变量可以被模块内所用函数访问，但不能被模块外其它函数访问；
#### （3）
在模块内的static函数只可被这一模块内的其它函数调用，这个函数的使用范围被限制在声明它的模块内；
#### （4）
在类中的static成员变量属于整个类所拥有，对类的所有对象只有一份拷贝；
#### （5）
在类中的static成员函数属于整个类所拥有，这个函数不接收this指针，因而只能访问类的static成员变量。

### const关键字至少有下列n个作用：
#### （1）
欲阻止一个变量被改变，可以使用const关键字。在定义该const变量时，通常需要对它进行初始化，因为以后就没有机会再去改变它了；
#### （2）
对指针来说，可以指定指针本身为const，也可以指定指针所指的数据为const，或二者同时指定为const；
#### （3）
在一个函数声明中，const可以修饰形参，表明它是一个输入参数，在函数内部不能改变其值；
#### （4）
对于类的成员函数，若指定其为const类型，则表明其是一个常函数，不能修改类的成员变量；
#### （5）
对于类的成员函数，有时候必须指定其返回值为const类型，以使得其返回值不为“左值”。例如：
const classA operator*(const classA& a1,const classA& a2);
　　operator*的返回结果必须是一个const对象。如果不是，这样的变态代码也不会编译出错：

classA a, b, c;
(a * b) = c; // 对a*b的结果赋值
　　操作(a * b) = c显然不符合编程者的初衷，也没有任何意义。

剖析：
　　惊讶吗？小小的static和const居然有这么多功能，我们能回答几个？如果只能回答1~2个，那还真得闭关再好好修炼修炼。

　　这个题可以考查面试者对程序设计知识的掌握程度是初级、中级还是比较深入，没有一定的知识广度和深度，不可能对这个问题给出全面的解答。大多数人只能回答出static和const关键字的部分功能。